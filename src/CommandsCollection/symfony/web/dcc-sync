#!/bin/bash

############################
# DDEV Commands Collection #
############################

## https://github.com/jackd248/ddev-commands-collection
## v<version/>
## dcc-autogenerated
. "$(dirname "$0")/../scripts/dcc-colors.sh"
printf "${reset}${cyan}[DCC]${reset} DDEV Commands Collection\n"

## Description: Executes db_sync_tool
## Usage: sync
## Example: "ddev sync" or "ddev sync prod" or "ddev sync -v" or "ddev sync prod -y"

system="stage"
option=

for var in "$@"; do
  if [[ "$var" =~ ^-.* ]]; then
    # check if argument is an python script option
    option=$var
  else
    # otherwise the argument describes the system to sync
    system=$var
  fi
done

db_sync_tool -f /var/www/html/deployment/db-sync-tool/sync-${system}-to-local.json -o /var/www/html/deployment/db-sync-tool/hosts.json ${option}

# display faq section
sh "$(dirname "$0")/../faq/dcc-faq-web-sync.sh"
