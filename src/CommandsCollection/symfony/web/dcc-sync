#!/bin/bash

############################
# DDEV Commands Collection #
############################

## https://github.com/jackd248/ddev-commands-collection
## v<version/>
## dcc-autogenerated
. "$(dirname "$0")/../dcc-config.sh"
. "$(dirname "$0")/../scripts/dcc-colors.sh"
printf "${reset}${cyan}[DCC]${reset} DDEV Commands Collection\n"

## Description: Executes db_sync_tool
## Usage: sync
## Example: "ddev sync" or "ddev sync prod" or "ddev sync -v" or "ddev sync prod -y"

system=${defaultSyncSystem}
option=

for var in "$@"; do
  if [[ "$var" =~ ^-.* ]]; then
    # check if argument is an python script option
    option=$var
  else
    # otherwise the argument describes the system to sync
    system=$var
  fi
done

printf "${reset}${cyan}[DCC]${reset}${reset}<web> ${black}db_sync_tool -f ${deploymentPath}/db-sync-tool/sync-${system}-to-local.${defaultSyncFileEnding} ${option}${reset}\n"
db_sync_tool -f ${deploymentPath}/db-sync-tool/sync-${system}-to-local.${defaultSyncFileEnding} --use-rsync ${option}

# display faq section
sh "$(dirname "$0")/../faq/dcc-faq-web-sync.sh"
